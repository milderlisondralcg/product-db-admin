function makeTable(){$("#edit").DataTable({stateSave:!0,keys:!0,select:!0,destroy:!0,bFilter:!0,aaData:edit_data,aoColumns:edit_columns,ordering:!1,pageLength:50}),jQuery(".dataTable").wrap('<div class="dataTables_scroll" />'),edit_data=[]}function loadData(){$.getJSON("assets/json/edit_example.json",function(t){for(var e=0;e<Object.keys(t.Laser1).length;e++)edit_data.push({specs:Object.keys(t.Laser1)[e],html:'<td><input type="text" class="spec'+e+'" name="spec'+e+'" value="'+Object.values(t.Laser1)[e]+'"></td>'});makeTable()})}function searchProducts(){var t=document.getElementById("search").value;$.getJSON("assets/json/products.json",function(e){$.each(e,function(e,a){for(var o=0;o<a.length;o++)t===a[o]&&(search_value=convertJSONforID(a[o]),populate_products(e))})})}function output(t){var e=" Added "+t+" specs to your table.";$(".message").html(e)}function populate_products(t){$.getJSON("assets/json/admin.json",function(e){console.log(e);var a=[];e[t];$.each(e,function(t,e){product_id=e.ID,product_name=e.Name,a[product_id]='<li><a class="products" href="###'+product_name+'" onclick="loadData(\''+product_id+"');output('"+product_id+"');\">"+product_name+"</a></li>"}),$(".info_more").html(a),$(".done").on("click",function(){display(editModal),$(".submit_edit").show()})})}function populate_productsa(t){var e=[];$.getJSON("assets/json/products.json",function(a){for(var o=[],s=a[t],c=0;c<s.length;c++)e[c]=convertJSONforID(s[c]),search_value==e[c]?o[c]='<li class="highlight"><a class="products" href="#'+e[c]+'" onclick="loadData(\''+s[c]+"')\">"+s[c]+"</a></li>":o[c]='<li><a class="products" href="#'+e[c]+'" onclick="loadData(\''+s[c]+"')\">"+s[c]+"</a></li>";$(".info_more").html(o),$(".done").on("click",function(){display(editModal),showButtons()})})}function getUrlVars(){var t={};window.location.href.replace(/[?&]+([^=&]+)=([^&]*)/gi,function(e,a,o){t[a]=o});return t}function load_product(t){console.log(t),$.post("/api/?action=get-product-detail",{id:t},function(t){console.log(t)},"json")}var edit_columns=[{data:"specs",sTitle:"<th>Specs</th>",sWidth:"30%"},{data:"html",sTitle:"<th>1</th>",sWidth:"70%"}],edit_temp=["editModal","searchSpecs","searchProducts()","products","searchBtn","add_delete","done","myTab_col","info","info_more"],editModal=document.getElementsByClassName("editModal"),close=document.getElementsByClassName("close"),edit_data=[];$(".load_data").click(function(){block(editModal),$(".close").on("click",function(){display(editModal)}),$.getJSON("assets/json/products.json",function(t){var e,a="",o="";$.each(t,function(t,s){e=convertJSONforID(t),a+='<li class="nav-item size"><a class="nav-link active '+e+'" data-toggle="tab" href="#'+e+'" onclick="populate_products(\''+t+'\')" role="tab" aria-controls="'+e+'" aria-selected="true">'+t+"</a></li>";for(var c=0;c<s.length;c++)o+='<option value="'+s[c]+'"/><br>'}),$(".myTab_col").html(a),$("#products").html(o)})}),$(".submit_edit").click(function(t){t.preventDefault(),console.log("submitted edits")}),$(document).ready(function(){$.ajax({url:"/system/expressionengine/third_party/product_db_admin/views/edit_template.php",type:"POST",dataType:"text",data:{templates:JSON.stringify(edit_temp)},success:function(t){$(".edit_template").html(t),$(".submit_edit").hide()},error:function(){alert("error")}});load_product(getUrlVars().id)});